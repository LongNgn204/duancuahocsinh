# ğŸŒŸ Báº¡n Äá»“ng HÃ nh - á»¨ng dá»¥ng Há»— trá»£ TÃ¢m lÃ½ Há»c Ä‘Æ°á»ng

[![Cloudflare Pages](https://img.shields.io/badge/Deployed%20on-Cloudflare%20Pages-F38020?logo=cloudflare)](https://ban-dong-hanh.pages.dev)
[![Cloudflare Workers](https://img.shields.io/badge/Backend-Cloudflare%20Workers-F38020?logo=cloudflare)](https://ban-dong-hanh-worker.stu725114073.workers.dev)
[![React](https://img.shields.io/badge/React-18.x-61DAFB?logo=react)](https://react.dev)
[![Vite](https://img.shields.io/badge/Vite-5.x-646CFF?logo=vite)](https://vitejs.dev)

> Má»™t ná»n táº£ng web hiá»‡n Ä‘áº¡i, an toÃ n vÃ  thÃ¢n thiá»‡n giÃºp há»c sinh Viá»‡t Nam (12-18 tuá»•i) chÄƒm sÃ³c sá»©c khá»e tÃ¢m tháº§n, phÃ¡t triá»ƒn thÃ³i quen tÃ­ch cá»±c vÃ  káº¿t ná»‘i vá»›i cá»™ng Ä‘á»“ng.

## ï¿½ Demo

- **ğŸŒ Production**: [https://ban-dong-hanh.pages.dev](https://ban-dong-hanh.pages.dev)
- **âš™ï¸ API Endpoint**: `https://ban-dong-hanh-worker.stu725114073.workers.dev`

## ï¿½ğŸ“‹ Má»¥c lá»¥c

- [Giá»›i thiá»‡u](#-giá»›i-thiá»‡u)
- [TÃ­nh nÄƒng](#-tÃ­nh-nÄƒng)
- [Tech Stack](#ï¸-tech-stack)
- [Cáº¥u trÃºc dá»± Ã¡n](#-cáº¥u-trÃºc-dá»±-Ã¡n)
- [HÆ°á»›ng dáº«n Setup](#-hÆ°á»›ng-dáº«n-setup)
- [Deployment](#-deployment)
- [Quy Ä‘á»‹nh Äáº¡o Ä‘á»©c & Quyá»n riÃªng tÆ°](#ï¸-quy-Ä‘á»‹nh-Ä‘áº¡o-Ä‘á»©c--quyá»n-riÃªng-tÆ°)
- [Testing](#-testing)
- [Performance](#-performance)
- [Contributing](#-contributing)
- [License](#-license)

## ğŸ¯ Giá»›i thiá»‡u

**Báº¡n Äá»“ng HÃ nh** lÃ  má»™t á»©ng dá»¥ng web Ä‘Æ°á»£c thiáº¿t káº¿ Ä‘áº·c biá»‡t cho há»c sinh Viá»‡t Nam, cung cáº¥p:

| TÃ­nh nÄƒng | MÃ´ táº£ |
|-----------|-------|
| ğŸ¤– **AI Mentor tÃ¢m lÃ½** | Chatbot tháº¥u cáº£m, khÃ´ng phÃ¡n xÃ©t, há»— trá»£ 24/7 |
| ğŸ§˜ **GÃ³c An YÃªn** | BÃ i táº­p thá»Ÿ, thÆ° giÃ£n, tháº» wellness ngáº«u nhiÃªn |
| ğŸº **Lá» Biáº¿t Æ n** | Ghi láº¡i nhá»¯ng Ä‘iá»u biáº¿t Æ¡n má»—i ngÃ y |
| ğŸ“ **Nháº­t kÃ½** | Viáº¿t nháº­t kÃ½ cáº£m xÃºc, theo dÃµi tÃ¢m tráº¡ng |
| ğŸ® **Mini Games** | TrÃ² chÆ¡i thÆ° giÃ£n, luyá»‡n pháº£n xáº¡ |
| ğŸ“š **TÃ i nguyÃªn** | Truyá»‡n dÃ¢n gian, AI Storyteller, hÆ°á»›ng dáº«n |
| ğŸ’¬ **Diá»…n Ä‘Ã n** | Káº¿t ná»‘i vá»›i cá»™ng Ä‘á»“ng, chia sáº» áº©n danh an toÃ n |
| ğŸ†˜ **Há»— trá»£ kháº©n cáº¥p** | SOS detector, hotline, báº£n Ä‘á»“ bá»‡nh viá»‡n |

## âœ¨ TÃ­nh nÄƒng

### Core Features

| TÃ­nh nÄƒng | Tráº¡ng thÃ¡i | MÃ´ táº£ |
|-----------|------------|-------|
| **AI Chat vá»›i TTS** | âœ… | Chat vá»›i AI mentor, há»— trá»£ Text-to-Speech |
| **Voice Chat** | âœ… | TrÃ² chuyá»‡n báº±ng giá»ng nÃ³i, real-time audio visualization |
| **Breathing Exercises** | âœ… | BÃ i táº­p thá»Ÿ vá»›i animation, Ã¢m thanh hÆ°á»›ng dáº«n |
| **Gratitude Jar** | âœ… | Há»‡ thá»‘ng tag, gá»£i Ã½ ná»™i dung, streak tracking |
| **Journal** | âœ… | Nháº­t kÃ½ cáº£m xÃºc vá»›i mood tracking |
| **Focus Timer** | âœ… | Pomodoro timer vá»›i notifications |
| **Sleep Log** | âœ… | Theo dÃµi giáº¥c ngá»§, cháº¥t lÆ°á»£ng giáº¥c ngá»§ |
| **Achievements** | âœ… | Há»‡ thá»‘ng thÃ nh tÃ­ch, XP, levels |
| **Analytics** | âœ… | Dashboard thá»‘ng kÃª cÃ¡ nhÃ¢n |
| **Forum** | âœ… | Diá»…n Ä‘Ã n áº©n danh vá»›i moderation |
| **Admin Dashboard** | âœ… | Quáº£n lÃ½ users, forum, SOS logs |
| **Language Coach** | âœ… | Luyá»‡n ngoáº¡i ngá»¯ vá»›i AI |

### Advanced Features

| TÃ­nh nÄƒng | Tráº¡ng thÃ¡i | MÃ´ táº£ |
|-----------|------------|-------|
| **SOS Detection** | âœ… | PhÃ¡t hiá»‡n nguy cÆ¡ tÃ¢m lÃ½ vá»›i 50+ patterns, Gen-Z vocabulary |
| **Context-Aware AI** | âœ… | Memory summarization, lÆ°u ngá»¯ cáº£nh dÃ i háº¡n |
| **Real-time Sync** | âœ… | Äá»“ng bá»™ dá»¯ liá»‡u vá»›i Cloudflare D1 |
| **Token Cost Control** | âœ… | Giá»›i háº¡n 500k tokens/thÃ¡ng, cáº£nh bÃ¡o khi gáº§n ngÆ°á»¡ng |
| **Prompt Injection Guard** | âœ… | Báº£o vá»‡ chá»‘ng prompt injection |
| **AI Safety Net** | âœ… | KhÃ´ng cháº©n Ä‘oÃ¡n bá»‡nh, khÃ´ng kÃª thuá»‘c |
| **Dark/Light Theme** | âœ… | Há»— trá»£ giao diá»‡n sÃ¡ng/tá»‘i |
| **Responsive Design** | âœ… | Tá»‘i Æ°u cho mobile, tablet, desktop |
| **Tour Guide** | âœ… | HÆ°á»›ng dáº«n ngÆ°á»i dÃ¹ng má»›i sá»­ dá»¥ng app |

## ğŸ› ï¸ Tech Stack

### Frontend
| CÃ´ng nghá»‡ | PhiÃªn báº£n | Má»¥c Ä‘Ã­ch |
|-----------|-----------|----------|
| **React** | 18.x | UI framework |
| **Vite** | 5.x | Build tool |
| **Tailwind CSS** | 3.x | Styling |
| **Framer Motion** | 11.x | Animations |
| **React Router DOM** | 6.x | Routing |
| **Zustand** | 4.x | State management |
| **Lucide React** | - | Icons |
| **React Markdown** | - | Markdown rendering |

### Backend
| CÃ´ng nghá»‡ | Má»¥c Ä‘Ã­ch |
|-----------|----------|
| **Cloudflare Workers** | Serverless functions |
| **Cloudflare D1** | SQLite database |
| **Workers AI** | LLM integration (@cf/meta/llama-3.1-8b-instruct) |
| **JWT** | Admin authentication |

### DevOps
| CÃ´ng nghá»‡ | Má»¥c Ä‘Ã­ch |
|-----------|----------|
| **Cloudflare Pages** | Frontend hosting |
| **Wrangler** | Cloudflare CLI |
| **Git** | Version control |

## ğŸ“ Cáº¥u trÃºc dá»± Ã¡n

```
duancuahocsinh/
â”œâ”€â”€ ğŸ“‚ frontend/                     # React + Vite app
â”‚   â”œâ”€â”€ ğŸ“‚ src/
â”‚   â”‚   â”œâ”€â”€ ğŸ“‚ components/           # 42 React components
â”‚   â”‚   â”‚   â”œâ”€â”€ achievements/        # ThÃ nh tÃ­ch
â”‚   â”‚   â”‚   â”œâ”€â”€ analytics/           # Thá»‘ng kÃª
â”‚   â”‚   â”‚   â”œâ”€â”€ auth/                # ÄÄƒng nháº­p/ÄÄƒng kÃ½
â”‚   â”‚   â”‚   â”œâ”€â”€ breathing/           # BÃ i táº­p thá»Ÿ
â”‚   â”‚   â”‚   â”œâ”€â”€ chat/                # AI Chat, Voice Chat
â”‚   â”‚   â”‚   â”œâ”€â”€ dashboard/           # Dashboard
â”‚   â”‚   â”‚   â”œâ”€â”€ focus/               # Focus Timer
â”‚   â”‚   â”‚   â”œâ”€â”€ games/               # Mini games (5 games)
â”‚   â”‚   â”‚   â”œâ”€â”€ gratitude/           # Lá» Biáº¿t Æ n
â”‚   â”‚   â”‚   â”œâ”€â”€ journal/             # Nháº­t kÃ½
â”‚   â”‚   â”‚   â”œâ”€â”€ layout/              # Sidebar, Header, Navigation
â”‚   â”‚   â”‚   â”œâ”€â”€ modals/              # Modals
â”‚   â”‚   â”‚   â”œâ”€â”€ resources/           # TÃ i nguyÃªn
â”‚   â”‚   â”‚   â”œâ”€â”€ selfcare/            # Self-care tips
â”‚   â”‚   â”‚   â”œâ”€â”€ settings/            # CÃ i Ä‘áº·t
â”‚   â”‚   â”‚   â”œâ”€â”€ sleep/               # Sleep Log
â”‚   â”‚   â”‚   â”œâ”€â”€ sos/                 # SOS Modal
â”‚   â”‚   â”‚   â”œâ”€â”€ tour/                # Tour Guide
â”‚   â”‚   â”‚   â””â”€â”€ ui/                  # UI components (9 components)
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ ğŸ“‚ pages/                # 16 Page components
â”‚   â”‚   â”‚   â”œâ”€â”€ AdminDashboard.jsx   # Quáº£n trá»‹ viÃªn
â”‚   â”‚   â”‚   â”œâ”€â”€ Analytics.jsx        # Thá»‘ng kÃª
â”‚   â”‚   â”‚   â”œâ”€â”€ Chat.jsx             # AI Chat
â”‚   â”‚   â”‚   â”œâ”€â”€ Dashboard.jsx        # Trang chá»§
â”‚   â”‚   â”‚   â”œâ”€â”€ Focus.jsx            # Focus Timer
â”‚   â”‚   â”‚   â”œâ”€â”€ FocusTimer.jsx       # Pomodoro
â”‚   â”‚   â”‚   â”œâ”€â”€ Forum.jsx            # Diá»…n Ä‘Ã n
â”‚   â”‚   â”‚   â”œâ”€â”€ Games.jsx            # Mini Games
â”‚   â”‚   â”‚   â”œâ”€â”€ Journey.jsx          # HÃ nh trÃ¬nh
â”‚   â”‚   â”‚   â”œâ”€â”€ LandingPage.jsx      # Trang Ä‘Ã­ch
â”‚   â”‚   â”‚   â”œâ”€â”€ LanguageCoach.jsx    # Luyá»‡n ngoáº¡i ngá»¯
â”‚   â”‚   â”‚   â””â”€â”€ Settings.jsx         # CÃ i Ä‘áº·t
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ ğŸ“‚ hooks/                # 10 Custom hooks
â”‚   â”‚   â”œâ”€â”€ ğŸ“‚ utils/                # 6 Utilities (API, SOS detector, etc.)
â”‚   â”‚   â”œâ”€â”€ ğŸ“‚ test/                 # Unit tests
â”‚   â”‚   â”œâ”€â”€ App.jsx                  # Root component
â”‚   â”‚   â”œâ”€â”€ App.css                  # App styles
â”‚   â”‚   â”œâ”€â”€ index.css                # Global styles
â”‚   â”‚   â””â”€â”€ main.jsx                 # Entry point
â”‚   â”‚
â”‚   â””â”€â”€ package.json
â”‚
â”œâ”€â”€ ğŸ“‚ backend/                       # Cloudflare Workers
â”‚   â”œâ”€â”€ ğŸ“‚ workers/                   # 10 Worker modules
â”‚   â”‚   â”œâ”€â”€ router.js                # Main router (30KB)
â”‚   â”‚   â”œâ”€â”€ ai-proxy.js              # AI proxy vá»›i safety guards (22KB)
â”‚   â”‚   â”œâ”€â”€ auth.js                  # Authentication (7KB)
â”‚   â”‚   â”œâ”€â”€ data-api.js              # CRUD APIs (48KB)
â”‚   â”‚   â”œâ”€â”€ forum-api.js             # Forum APIs (26KB)
â”‚   â”‚   â”œâ”€â”€ memory.js                # Context summarization (5KB)
â”‚   â”‚   â”œâ”€â”€ risk.js                  # SOS risk classification (6KB)
â”‚   â”‚   â”œâ”€â”€ sanitize.js              # Input sanitization (2KB)
â”‚   â”‚   â””â”€â”€ token-tracker.js         # Token cost control (3KB)
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“‚ scripts/                   # Utility scripts
â”‚   â”œâ”€â”€ schema.sql                    # Database schema (13KB)
â”‚   â”œâ”€â”€ wrangler.toml                 # Cloudflare config
â”‚   â””â”€â”€ package.json
â”‚
â”œâ”€â”€ ğŸ“‚ docs/                          # Documentation
â”‚   â”œâ”€â”€ PROMPTS.md                    # AI system instructions
â”‚   â”œâ”€â”€ DEPLOY.md                     # Deployment guide
â”‚   â””â”€â”€ deploy-info.json              # Deployment metadata
â”‚
â”œâ”€â”€ ğŸ“‚ .agent/                        # Agent workflows
â”œâ”€â”€ plan.md                           # Development plan
â””â”€â”€ README.md                         # This file
```

## ğŸš€ HÆ°á»›ng dáº«n Setup

### Prerequisites

- Node.js 18+ vÃ  npm/yarn
- Cloudflare account (miá»…n phÃ­)
- Git

### 1. Clone repository

```bash
git clone https://github.com/LongNgn204/duancuahocsinh.git
cd duancuahocsinh
```

### 2. Setup Frontend

```bash
cd frontend
npm install
npm run dev
```

Frontend sáº½ cháº¡y táº¡i `http://localhost:5173`

### 3. Setup Backend

```bash
cd backend
npm install

# Táº¡o D1 database
npx wrangler d1 create ban-dong-hanh-db

# Cáº­p nháº­t database_id trong wrangler.toml

# Cháº¡y migrations
npx wrangler d1 execute ban-dong-hanh-db --file=./schema.sql

# Deploy worker (hoáº·c cháº¡y local)
npx wrangler dev
```

### 4. Cáº¥u hÃ¬nh Environment Variables

Táº¡o file `.env` trong `frontend/`:

```env
VITE_API_URL=https://your-worker.workers.dev
```

Cáº­p nháº­t `wrangler.toml` trong `backend/`:

```toml
[vars]
ALLOW_ORIGIN = "http://localhost:5173,https://your-domain.pages.dev"
MODEL = "@cf/meta/llama-3.1-8b-instruct"
MONTHLY_TOKEN_LIMIT = "500000"
ADMIN_PASSWORD = "your-secure-password"
JWT_SECRET = "your-jwt-secret"
```

### 5. Cháº¡y Development

```bash
# Terminal 1: Frontend
cd frontend && npm run dev

# Terminal 2: Backend
cd backend && npx wrangler dev
```

## ğŸ“¦ Deployment

### Frontend (Cloudflare Pages)

```bash
cd frontend
npm run build
npx wrangler pages deploy dist --project-name=ban-dong-hanh
```

### Backend (Cloudflare Workers)

```bash
cd backend
npx wrangler deploy
```

### Database Migration

```bash
npx wrangler d1 execute ban-dong-hanh-db --file=./schema.sql --remote
```

## ğŸ›¡ï¸ Quy Ä‘á»‹nh Äáº¡o Ä‘á»©c & Quyá»n riÃªng tÆ°

### NguyÃªn táº¯c Äáº¡o Ä‘á»©c

| # | NguyÃªn táº¯c | MÃ´ táº£ |
|---|------------|-------|
| 1 | **An toÃ n trÆ°á»›c tiÃªn** | AI khÃ´ng bao giá» cháº©n Ä‘oÃ¡n bá»‡nh hoáº·c kÃª thuá»‘c |
| 2 | **KhÃ´ng thay tháº¿ chuyÃªn gia** | LuÃ´n khuyáº¿n khÃ­ch ngÆ°á»i dÃ¹ng tÃ¬m sá»± giÃºp Ä‘á»¡ chuyÃªn nghiá»‡p |
| 3 | **Báº£o máº­t dá»¯ liá»‡u** | KhÃ´ng lÆ°u thÃ´ng tin cÃ¡ nhÃ¢n nháº¡y cáº£m (PII) |
| 4 | **Quyá»n riÃªng tÆ°** | Diá»…n Ä‘Ã n áº©n danh, khÃ´ng tiáº¿t lá»™ danh tÃ­nh |
| 5 | **Kiá»ƒm duyá»‡t ná»™i dung** | Tá»± Ä‘á»™ng vÃ  thá»§ cÃ´ng Ä‘á»ƒ Ä‘áº£m báº£o mÃ´i trÆ°á»ng an toÃ n |

### Quyá»n riÃªng tÆ°

- **Dá»¯ liá»‡u lÆ°u trá»¯**: Chá»‰ lÆ°u dá»¯ liá»‡u cáº§n thiáº¿t (gratitude, journal, achievements)
- **KhÃ´ng lÆ°u PII**: KhÃ´ng lÆ°u tÃªn tháº­t, Ä‘á»‹a chá»‰, sá»‘ Ä‘iá»‡n thoáº¡i
- **MÃ£ hÃ³a**: Dá»¯ liá»‡u nháº¡y cáº£m Ä‘Æ°á»£c mÃ£ hÃ³a trong Cloudflare KV/D1
- **XÃ³a dá»¯ liá»‡u**: NgÆ°á»i dÃ¹ng cÃ³ thá»ƒ export vÃ  xÃ³a dá»¯ liá»‡u báº¥t cá»© lÃºc nÃ o
- **Cookie**: Chá»‰ sá»­ dá»¥ng cookie cáº§n thiáº¿t cho authentication

### SOS & An toÃ n

- ğŸš¨ **SOS Detection**: Tá»± Ä‘á»™ng phÃ¡t hiá»‡n nguy cÆ¡ tÃ¢m lÃ½ vá»›i 50+ patterns
- ğŸ“ **Hotline**: LiÃªn káº¿t vá»›i hotline tÆ° váº¥n tÃ¢m lÃ½ miá»…n phÃ­ (1800 599 920)
- ğŸ—ºï¸ **Báº£n Ä‘á»“**: Hiá»ƒn thá»‹ bá»‡nh viá»‡n/phÃ²ng khÃ¡m gáº§n nháº¥t
- ğŸ“ **Logging**: Ghi log SOS events Ä‘á»ƒ admin theo dÃµi (áº©n danh)

## ğŸ§ª Testing

Xem [docs/TESTING.md](docs/TESTING.md) Ä‘á»ƒ biáº¿t chi tiáº¿t vá» testing.

### Cháº¡y Tests

```bash
# Backend tests (Vitest)
cd backend && npm test

# Frontend tests (Vitest)
cd frontend && npm test

# E2E tests (Playwright)
cd frontend && npm run e2e:install && npm run e2e
```

### Test Coverage

- âœ… **Unit Tests**: sosDetector, sanitizeInput, XP/Level calculation, Streak calculation
- âœ… **Integration Tests**: API endpoints (Auth, Data, Forum, SOS, Admin)
- âœ… **E2E Tests**: User flows (Onboarding, Chat, Gratitude, Journal, Games, Settings, Forum)

### Unit Tests

```bash
cd backend
npm test
```

### Integration Tests

```bash
cd backend
npm run test:integration
```

### Manual Testing Checklist

- [x] Chat AI hoáº¡t Ä‘á»™ng, streaming OK
- [x] SOS detector phÃ¡t hiá»‡n keywords
- [x] Voice Chat hoáº¡t Ä‘á»™ng trÃªn Chrome/Edge
- [x] Responsive trÃªn mobile (320px, 375px, 768px, 1024px)
- [x] Touch targets Ä‘á»§ lá»›n (48x48px)
- [x] Keyboard navigation hoáº¡t Ä‘á»™ng
- [x] Dark mode toggle OK
- [x] Export/Import data OK

## ğŸ“Š Performance

### Lighthouse Targets

| Metric | Target | Status |
|--------|--------|--------|
| Performance | >85 | âœ… |
| Accessibility | >90 | âœ… |
| Best Practices | >90 | âœ… |
| SEO | >80 | âœ… |

### Optimization

- âœ… Lazy loading components
- âœ… Code splitting vá»›i React.lazy
- âœ… Image optimization
- âœ… CSS minification
- âœ… Tree shaking
- âœ… Edge caching (Cloudflare)

## ğŸ¤ Contributing

ChÃºng tÃ´i hoan nghÃªnh má»i Ä‘Ã³ng gÃ³p! Vui lÃ²ng:

1. Fork repository
2. Táº¡o feature branch (`git checkout -b feature/amazing-feature`)
3. Commit changes (`git commit -m 'Add amazing feature'`)
4. Push to branch (`git push origin feature/amazing-feature`)
5. Má»Ÿ Pull Request

### Code Style

- Sá»­ dá»¥ng ESLint + Prettier
- Comment code báº±ng tiáº¿ng Viá»‡t
- Follow React best practices
- Test trÆ°á»›c khi commit

## ğŸ“ License

Dá»± Ã¡n nÃ y Ä‘Æ°á»£c phÃ¡t hÃ nh dÆ°á»›i giáº¥y phÃ©p MIT. Xem file `LICENSE` Ä‘á»ƒ biáº¿t thÃªm chi tiáº¿t.

## ğŸ™ Acknowledgments

- **Cloudflare** - Infrastructure vÃ  Workers AI
- **React Team** - Framework tuyá»‡t vá»i
- **Tailwind CSS** - Utility-first CSS
- **Framer Motion** - Animation library
- **Lucide** - Icon library

## ğŸ“ LiÃªn há»‡

| KÃªnh | ThÃ´ng tin |
|------|-----------|
| ğŸ“§ Email | stu725114073@hnue.edu.vn |
| â˜ï¸ Hotline | 0896636181 (miá»…n phÃ­ 24/7) |
| ğŸŒ Website | https://duancuahocsinh.pages.dev/ |

---

<div align="center">

**Made with â¤ï¸ for Vietnamese students**

*Last updated: December 14, 2025*

</div>
