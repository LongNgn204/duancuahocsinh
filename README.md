<p align="center">
  <img src="./Thiáº¿t káº¿ chÆ°a cÃ³ tÃªn.png" alt="Báº¡n Äá»“ng HÃ nh Logo" width="180"/>
</p>

<h1 align="center">Báº¡n Äá»“ng HÃ nh (The Companion)</h1>

<p align="center">
  <strong>Ná»n táº£ng há»— trá»£ sá»©c khá»e tinh tháº§n toÃ n diá»‡n dÃ nh cho há»c sinh Viá»‡t Nam ğŸ‡»ğŸ‡³</strong>
</p>

<p align="center">
  <a href="https://bandonghanh.pages.dev">ğŸŒ Demo Trá»±c Tuyáº¿n</a> |
  <a href="#-tÃ­nh-nÄƒng-ná»•i-báº­t">âœ¨ TÃ­nh NÄƒng</a> |
  <a href="#-kiáº¿n-trÃºc--luá»“ng-hoáº¡t-Ä‘á»™ng">ğŸ— Kiáº¿n TrÃºc</a> |
  <a href="#-hÆ°á»›ng-dáº«n-cÃ i-Ä‘áº·t">ğŸ“¦ CÃ i Äáº·t</a>
</p>

---

## ğŸ“Œ Giá»›i thiá»‡u

**Báº¡n Äá»“ng HÃ nh** lÃ  má»™t á»©ng dá»¥ng web Progressive Web App (PWA) Ä‘Æ°á»£c thiáº¿t káº¿ Ä‘áº·c biá»‡t cho lá»©a tuá»•i vá»‹ thÃ nh niÃªn (12-18 tuá»•i). Dá»± Ã¡n káº¿t há»£p cÃ´ng nghá»‡ AI tiÃªn tiáº¿n vá»›i cÃ¡c phÆ°Æ¡ng phÃ¡p tÃ¢m lÃ½ há»c tÃ­ch cá»±c Ä‘á»ƒ táº¡o ra má»™t khÃ´ng gian an toÃ n, nÆ¡i cÃ¡c báº¡n tráº» cÃ³ thá»ƒ chia sáº», há»c há»i vÃ  chá»¯a lÃ nh.

### Sá»© má»‡nh cá»‘t lÃµi

> "KhÃ´ng ai pháº£i lá»›n lÃªn má»™t mÃ¬nh."

| Trá»¥ cá»™t | MÃ´ táº£ |
|---------|-------|
| ğŸ§  **Tháº¥u hiá»ƒu** | AI Mentor láº¯ng nghe vÃ  tháº¥u cáº£m khÃ´ng phÃ¡n xÃ©t |
| â¤ï¸ **Chá»¯a lÃ nh** | CÃ¡c bÃ i táº­p thá»Ÿ, thiá»n vÃ  viáº¿t nháº­t kÃ½ biáº¿t Æ¡n |
| ğŸ›¡ï¸ **Báº£o vá»‡** | Há»‡ thá»‘ng phÃ¡t hiá»‡n sá»›m dáº¥u hiá»‡u rá»§i ro (SOS) |
| ğŸŒ± **PhÃ¡t triá»ƒn** | ThÆ° viá»‡n kiáº¿n thá»©c ká»¹ nÄƒng sá»‘ng vÃ  hÆ°á»›ng nghiá»‡p |

---

## âœ¨ TÃ­nh nÄƒng ná»•i báº­t

### 1. ğŸ¤– AI Mentor (Trá»£ lÃ½ áº£o thÃ´ng minh)
- **Chat & Voice:** TrÃ² chuyá»‡n báº±ng vÄƒn báº£n hoáº·c giá»ng nÃ³i tiáº¿ng Viá»‡t tá»± nhiÃªn.
- **Real-time Context:** AI nhá»› ngá»¯ cáº£nh há»™i thoáº¡i vÃ  cÃ¡ nhÃ¢n hÃ³a pháº£n há»“i.
- **Safety First:** CÆ¡ cháº¿ kiá»ƒm duyá»‡t ná»™i dung Ä‘á»™c háº¡i vÃ  phÃ¡t hiá»‡n SOS Ä‘a táº§ng.

### 2. ğŸ“Š Real-time Dashboard
- **Streak:** Theo dÃµi chuá»—i ngÃ y Ä‘iá»ƒm danh liÃªn tá»¥c.
- **Chat Stats:** Thá»‘ng kÃª sá»‘ lÆ°á»£ng tÆ°Æ¡ng tÃ¡c thá»±c táº¿ vá»›i AI.
- **Biá»ƒu Ä‘á»“ cáº£m xÃºc:** Theo dÃµi biáº¿n Ä‘á»™ng tÃ¢m tráº¡ng theo tuáº§n.

### 3. ğŸ§  GÃ³c Kiáº¿n Thá»©c (Knowledge Hub)
- **ThÆ° viá»‡n bÃ i viáº¿t:** 15+ chá»§ Ä‘á» tá»« tÃ¢m lÃ½, tÃ¬nh yÃªu tuá»•i há»c trÃ² Ä‘áº¿n hÆ°á»›ng nghiá»‡p (Ikigai) vÃ  tÃ i chÃ­nh cÃ¡ nhÃ¢n.
- **Responsive UI:** Tráº£i nghiá»‡m Ä‘á»c mÆ°á»£t mÃ  trÃªn má»i thiáº¿t bá»‹ vá»›i cháº¿ Ä‘á»™ Focus Mode.

### 4. ğŸ§˜ Wellness Center (Trung tÃ¢m an yÃªn)
- **BÃ i táº­p thá»Ÿ:** 4-7-8, Box Breathing vá»›i hÆ°á»›ng dáº«n visual sinh Ä‘á»™ng.
- **Lá» Biáº¿t Æ n:** Ghi láº¡i nhá»¯ng Ä‘iá»u tÃ­ch cá»±c nhá» bÃ© má»—i ngÃ y.
- **GÃ³c Nhá»:** Äá»“ng há»“ Pomodoro vÃ  Ã¢m thanh thiÃªn nhiÃªn giÃºp táº­p trung.

### 5. ğŸ® Game Therapy (Trá»‹ liá»‡u qua trÃ² chÆ¡i)
- **Color Match:** RÃ¨n luyá»‡n pháº£n xáº¡ vÃ  nháº­n diá»‡n mÃ u sáº¯c.
- **Bubble Pop:** Xáº£ stress báº±ng cÃ¡ch Ä‘áº­p bong bÃ³ng áº£o.
- **Memory Flip:** Luyá»‡n trÃ­ nhá»› ngáº¯n háº¡n.

---

## ğŸ— Kiáº¿n trÃºc & Luá»“ng hoáº¡t Ä‘á»™ng

### System Architecture

```mermaid
graph TD
    User[User Device ğŸ“±/ğŸ’»] -->|HTTPS| Cloudflare[Cloudflare Edge Network â˜ï¸]
    
    subgraph Frontend [React SPA]
        UI[User Interface]
        State[Global State (Context)]
        Cache[Local Storage]
    end
    
    subgraph Backend [Cloudflare Workers]
        Router[API Router]
        Auth[Auth Service]
        AI[AI Proxy Service]
        Risk[Risk Engine (SOS)]
        Data[Data Service]
    end
    
    subgraph Database [Cloudflare D1]
        DB[(SQLite DB)]
    end
    
    subgraph External_APIs [External Services]
        OpenRouter[OpenRouter AI API]
        DDG[DuckDuckGo Search]
    end
    
    Cloudflare --> Frontend
    Cloudflare --> Backend
    
    UI <--> State
    State <--> Router
    
    Router --> Auth
    Router --> AI
    Router --> Data
    
    Auth <--> DB
    Data <--> DB
    
    AI --> Risk
    AI --> DDG
    AI --> OpenRouter
```

### Authentication Flow

```mermaid
sequenceDiagram
    participant User
    participant FE as Frontend
    participant BE as Backend Worker
    participant DB as D1 Database
    
    User->>FE: Nháº­p Username/Password
    FE->>BE: POST /api/auth/login
    BE->>DB: SELECT user
    DB-->>BE: User Data (Hash)
    BE->>BE: Verify Password (Bcrypt)
    alt Valid
        BE->>DB: UPDATE last_login
        BE->>BE: Calculate Stats (Streak/Chats)
        BE-->>FE: Success + User Info + Real Stats
        FE->>FE: Update Context & LocalStorage
    else Invalid
        BE-->>FE: Error 401
    end
```

### AI Chat Flow (with Data Sync)

```mermaid
sequenceDiagram
    participant User
    participant FE as Frontend
    participant BE as Backend
    participant AI as OpenRouter
    participant DB as D1 DB

    User->>FE: Gá»­i tin nháº¯n
    FE->>BE: POST /api/ai/chat (Stream)
    BE->>BE: Check SOS & Profanity
    BE->>AI: Request Completion
    AI-->>BE: SSE Stream Response
    BE-->>FE: SSE Stream Response
    FE->>FE: Hiá»ƒn thá»‹ dáº§n tin nháº¯n
    
    Note over FE, DB: Auto Sync Process
    FE->>BE: POST /api/data/chat/messages (Background)
    BE->>DB: INSERT chat_messages
    BE->>DB: UPDATE chat_threads
    BE-->>FE: Sync Success
```

---

## ğŸ›  CÃ´ng nghá»‡ sá»­ dá»¥ng

| LÄ©nh vá»±c | CÃ´ng nghá»‡ |
|----------|-----------|
| **Frontend Core** | React 18, Vite 6 |
| **Styling** | Tailwind CSS 4, Framer Motion (Animations) |
| **State Management** | React Context API, Custom Hooks |
| **Markdown & Math** | React Markdown, KaTeX, Remark/Rehype |
| **Backend** | Cloudflare Workers (Serverless) |
| **Database** | Cloudflare D1 (Distributed SQLite) |
| **AI Integration** | OpenRouter API (Gemini/Mistral/Llama) |
| **Search Engine** | DuckDuckGo Instant Answer API |
| **Deployment** | Cloudflare Pages |

---

## ğŸ“ Cáº¥u trÃºc thÆ° má»¥c

```
duancuahocsinh/
â”œâ”€â”€ frontend/                 # React Application
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ components/       # Reusable UI Blocks
â”‚   â”‚   â”‚   â”œâ”€â”€ layout/       # Sidebar, Header, etc.
â”‚   â”‚   â”‚   â”œâ”€â”€ ui/           # Buttons, Cards, Inputs
â”‚   â”‚   â”‚   â””â”€â”€ games/        # Game Components
â”‚   â”‚   â”œâ”€â”€ pages/            # Main Screens (Dashboard, Chat, KnowledgeHub...)
â”‚   â”‚   â”œâ”€â”€ services/         # API Integration Logic
â”‚   â”‚   â”œâ”€â”€ hooks/            # Custom Hooks (useAI, useAuth)
â”‚   â”‚   â”œâ”€â”€ data/             # Static Contents (Articles, Quotes)
â”‚   â”‚   â””â”€â”€ utils/            # Helpers
â”‚   â””â”€â”€ public/               # Assets
â”‚
â”œâ”€â”€ backend/                  # Serverless Backend
â”‚   â”œâ”€â”€ workers/
â”‚   â”‚   â”œâ”€â”€ router.js         # API Entry Point
â”‚   â”‚   â”œâ”€â”€ auth.js           # Login/Register Logic
â”‚   â”‚   â”œâ”€â”€ ai-proxy.js       # AI Handling & Prompt Engineering
â”‚   â”‚   â”œâ”€â”€ data-api.js       # CRUD Operations
â”‚   â”‚   â””â”€â”€ schema.sql        # Database Structure
â”‚   â””â”€â”€ wrangler.toml         # Cloudflare Config
â”‚
â””â”€â”€ README.md                 # Project Documentation
```

---

## ğŸ“¦ HÆ°á»›ng dáº«n cÃ i Ä‘áº·t

### YÃªu cáº§u tiÃªn quyáº¿t
- Node.js 18.x trá»Ÿ lÃªn
- TÃ i khoáº£n Cloudflare (Ä‘á»ƒ deploy backend)

### 1. Setup Backend (Cloudflare Workers)

```bash
cd backend
npm install

# Login vÃ o Cloudflare
npx wrangler login

# Táº¡o database D1
npx wrangler d1 create ban_dong_hanh_db

# Cháº¡y migration Ä‘á»ƒ táº¡o báº£ng
npx wrangler d1 execute ban_dong_hanh_db --local --file=./workers/schema.sql

# Start local server
npm run dev
```

### 2. Setup Frontend

```bash
cd frontend
npm install

# Táº¡o file .env.local
echo "VITE_API_URL=http://localhost:8787" > .env.local

# Start dev server
npm run dev
```

Truy cáº­p `http://localhost:5173` Ä‘á»ƒ tráº£i nghiá»‡m á»©ng dá»¥ng!

---

## ğŸ¤ ÄÃ³ng gÃ³p (Contributing)

ChÃºng tÃ´i luÃ´n hoan nghÃªnh má»i sá»± Ä‘Ã³ng gÃ³p Ä‘á»ƒ dá»± Ã¡n ngÃ y cÃ ng hoÃ n thiá»‡n hÆ¡n cho cá»™ng Ä‘á»“ng há»c sinh Viá»‡t Nam.

1.  **Fork** dá»± Ã¡n nÃ y.
2.  Táº¡o branch tÃ­nh nÄƒng má»›i (`git checkout -b feature/AmazingFeature`).
3.  Commit thay Ä‘á»•i (`git commit -m 'Add some AmazingFeature'`).
4.  Push lÃªn branch (`git push origin feature/AmazingFeature`).
5.  Má»Ÿ má»™t **Pull Request**.

---

## ğŸ“„ License

Dá»± Ã¡n thuá»™c vá» **LongNgn204** vÃ  Ä‘Æ°á»£c chia sáº» dÆ°á»›i giáº¥y phÃ©p [MIT License](LICENSE).

---

<p align="center">
  Made with â¤ï¸ & â˜• by <strong>Team Báº¡n Äá»“ng HÃ nh</strong>
</p>
